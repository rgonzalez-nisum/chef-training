-----> Creating <loadBalancer-centos-66>...
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'opscode-centos-6.6'...
[KProgress: 10%[KProgress: 30%[KProgress: 40%[KProgress: 50%[KProgress: 60%[KProgress: 70%[KProgress: 80%[KProgress: 90%[K==> default: Matching MAC address for NAT networking...
==> default: Setting the name of the VM: loadBalancer-centos-66_default_1426198983703_49684
==> default: Fixed port collision for 22 => 2222. Now on port 2201.
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==> default: Forwarding ports...
    default: 22 => 2201 (adapter 1)
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2201
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if its present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
==> default: Setting hostname...
==> default: Machine not provisioning because `--no-provision` is specified.
Vagrant instance <loadBalancer-centos-66> created.
Finished creating <loadBalancer-centos-66> (0m52.41s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing solo.rb
-----> Installing Chef Omnibus (11.16.4)
downloading https://www.chef.io/chef/install.sh
  to file /tmp/install.sh
trying wget...
Downloading Chef 11.16.4 for el...
downloading https://www.chef.io/chef/metadata?v=11.16.4&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64
  to file /tmp/install.sh.2271/metadata.txt
trying wget...
url	https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.16.4-1.el6.x86_64.rpm
md5	2355a7a93bc4cc353bee6de9e3bcb7ba
sha256	278599ff185b680703e7a779db8674eeba843e9fe42a0ae06e01a9dfa9ac4d0e
downloaded metadata file looks valid...
downloading https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.16.4-1.el6.x86_64.rpm
  to file /tmp/install.sh.2271/chef-11.16.4-1.el6.x86_64.rpm
trying wget...
Comparing checksum with sha256sum...
Installing Chef 11.16.4
installing with rpm...
warning: /tmp/install.sh.2271/chef-11.16.4-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
Preparing...                                                            (100%)#                                           (100%)##                                          (100%)###                                         (100%)####                                        (100%)#####                                       (100%)######                                      (100%)#######                                     (100%)########                                    (100%)#########                                   (100%)##########                                  (100%)###########                                 (100%)############                                (100%)#############                               (100%)##############                              (100%)###############                             (100%)################                            (100%)#################                           (100%)##################                          (100%)###################                         (100%)####################                        (100%)#####################                       (100%)######################                      (100%)#######################                     (100%)########################                    (100%)#########################                   (100%)##########################                  (100%)###########################                 (100%)############################                (100%)#############################               (100%)##############################              (100%)###############################             (100%)################################            (100%)#################################           (100%)##################################          (100%)###################################         (100%)####################################        (100%)#####################################       (100%)######################################      (100%)#######################################     (100%)########################################    (100%)#########################################   (100%)##########################################  (100%)########################################### (100%)########################################### [100%]
   1:chef                                                               (  1%)#                                           (  3%)##                                          (  6%)###                                         (  8%)####                                        ( 10%)#####                                       ( 13%)######                                      ( 15%)#######                                     ( 17%)########                                    ( 19%)#########                                   ( 22%)##########                                  ( 24%)###########                                 ( 26%)############                                ( 28%)#############                               ( 31%)##############                              ( 33%)###############                             ( 35%)################                            ( 38%)#################                           ( 40%)##################                          ( 42%)###################                         ( 44%)####################                        ( 47%)#####################                       ( 49%)######################                      ( 51%)#######################                     ( 53%)########################                    ( 56%)#########################                   ( 58%)##########################                  ( 60%)###########################                 ( 63%)############################                ( 65%)#############################               ( 67%)##############################              ( 69%)###############################             ( 72%)################################            ( 74%)#################################           ( 76%)##################################          ( 78%)###################################         ( 81%)####################################        ( 83%)#####################################       ( 85%)######################################      ( 88%)#######################################     ( 90%)########################################    ( 92%)#########################################   ( 94%)##########################################  ( 97%)########################################### ( 99%)########################################### [100%]
Thank you for installing Chef!
Transferring files to <loadBalancer-centos-66>
[2015-03-12T22:24:54+00:00] WARN: 
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
SSL validation of HTTPS requests is disabled. HTTPS connections are still
encrypted, but chef is not able to detect forged replies or man in the middle
attacks.

To fix this issue add an entry like this to your configuration file:

```
  # Verify all HTTPS connections (recommended)
  ssl_verify_mode :verify_peer

  # OR, Verify only connections to chef-server
  verify_api_cert true
```

To check your SSL configuration, or troubleshoot errors, you can use the
`knife ssl check` command like so:

```
  knife ssl check -c /tmp/kitchen/solo.rb
```

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Starting Chef Client, version 11.16.4
Compiling Cookbooks...
[2015-03-12T22:24:56+00:00] WARN: Failed to read the private key /tmp/kitchen/client.pem: #<Errno::ENOENT: No such file or directory - /tmp/kitchen/client.pem>

================================================================================
Recipe Compile Error in /tmp/kitchen/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb
================================================================================

Chef::Exceptions::PrivateKeyMissing
-----------------------------------
I cannot read /tmp/kitchen/client.pem, which you told me to use to sign requests!

Cookbook Trace:
---------------
  /tmp/kitchen/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb:9:in `from_file'

Relevant File Content:
----------------------
/tmp/kitchen/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb:

  2:  # Cookbook Name:: rgCookbook
  3:  # Recipe:: rgLoadBalancer
  4:  #
  5:  # Copyright 2015, Ricardo Gonzalez
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9>> search(:node, "recipe:rgWebServer").each_with_index do |server, index|
 10:  	log "#{index} #{result["ipaddress"]}"
 11:  end 12:  


Running handlers:
[2015-03-12T22:24:56+00:00] ERROR: Running exception handlers
Running handlers complete
[2015-03-12T22:24:56+00:00] ERROR: Exception handlers complete
[2015-03-12T22:24:56+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out
Chef Client failed. 0 resources updated in 1.806216234 seconds
[2015-03-12T22:24:56+00:00] ERROR: I cannot read /tmp/kitchen/client.pem, which you told me to use to sign requests!
[2015-03-12T22:24:56+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
Converge failed on instance <loadBalancer-centos-66>.
------Exception-------
Class: Kitchen::ActionFailed
Message: SSH exited (1) for command: [sh -c '
sudo -E /opt/chef/bin/chef-solo --config /tmp/kitchen/solo.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
']
---Nested Exception---
Class: Kitchen::SSHFailed
Message: SSH exited (1) for command: [sh -c '
sudo -E /opt/chef/bin/chef-solo --config /tmp/kitchen/solo.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
']
------Backtrace-------
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:152:in `rescue in run_remote'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:148:in `run_remote'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:50:in `block in converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:70:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `new'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/kitchen-vagrant-0.15.0/lib/kitchen/driver/vagrant.rb:75:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `block in perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `synchronize_or_call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:381:in `block in action'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/benchmark.rb:281:in `measure'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:380:in `action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:312:in `converge_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:292:in `block in transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `each'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:130:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `block (2 levels) in run_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `block in create_with_logging_context'
----------------------
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing solo.rb
[SSH] connection failed, retrying (#<Errno::ECONNREFUSED: Connection refused - connect(2)>)
[SSH] connection failed, retrying (#<Errno::ECONNREFUSED: Connection refused - connect(2)>)
[SSH] connection failed, terminating (#<Errno::ECONNREFUSED: Connection refused - connect(2)>)
Converge failed on instance <loadBalancer-centos-66>.
------Exception-------
Class: Errno::ECONNREFUSED
Message: Connection refused - connect(2)
------Backtrace-------
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:70:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:70:in `open'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:70:in `block in initialize'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/timeout.rb:52:in `timeout'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/timeout.rb:97:in `timeout'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:67:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh.rb:207:in `new'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh.rb:207:in `start'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:201:in `establish_connection'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:184:in `session'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:236:in `exec_with_exit'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:81:in `exec'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:150:in `run_remote'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:46:in `block in converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:70:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `new'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/kitchen-vagrant-0.15.0/lib/kitchen/driver/vagrant.rb:75:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `block in perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `synchronize_or_call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:381:in `block in action'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/benchmark.rb:281:in `measure'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:380:in `action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:312:in `converge_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:292:in `block in transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `each'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:130:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `block (2 levels) in run_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `block in create_with_logging_context'
----------------------
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing solo.rb
[SSH] connection failed, retrying (#<Errno::ECONNREFUSED: Connection refused - connect(2)>)
[SSH] connection failed, retrying (#<Errno::ECONNREFUSED: Connection refused - connect(2)>)
[SSH] connection failed, terminating (#<Errno::ECONNREFUSED: Connection refused - connect(2)>)
Converge failed on instance <loadBalancer-centos-66>.
------Exception-------
Class: Errno::ECONNREFUSED
Message: Connection refused - connect(2)
------Backtrace-------
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:70:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:70:in `open'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:70:in `block in initialize'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/timeout.rb:52:in `timeout'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/timeout.rb:97:in `timeout'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:67:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh.rb:207:in `new'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/net-ssh-2.9.2/lib/net/ssh.rb:207:in `start'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:201:in `establish_connection'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:184:in `session'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:236:in `exec_with_exit'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:81:in `exec'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:150:in `run_remote'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:46:in `block in converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:70:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `new'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/kitchen-vagrant-0.15.0/lib/kitchen/driver/vagrant.rb:75:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `block in perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `synchronize_or_call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:381:in `block in action'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/benchmark.rb:281:in `measure'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:380:in `action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:312:in `converge_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:292:in `block in transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `each'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:130:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `block (2 levels) in run_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `block in create_with_logging_context'
----------------------
-----> Destroying <loadBalancer-centos-66>...
==> default: Destroying VM and associated drives...
Vagrant instance <loadBalancer-centos-66> destroyed.
Finished destroying <loadBalancer-centos-66> (0m4.54s).
-----> Creating <loadBalancer-centos-66>...
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'opscode-centos-6.6'...
[KProgress: 10%[KProgress: 30%[KProgress: 40%[KProgress: 50%[KProgress: 60%[KProgress: 70%[KProgress: 80%[KProgress: 90%[K==> default: Matching MAC address for NAT networking...
==> default: Setting the name of the VM: loadBalancer-centos-66_default_1426257769568_17096
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==> default: Forwarding ports...
    default: 22 => 2222 (adapter 1)
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if its present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
==> default: Setting hostname...
==> default: Machine not provisioning because `--no-provision` is specified.
Vagrant instance <loadBalancer-centos-66> created.
Finished creating <loadBalancer-centos-66> (0m54.36s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing solo.rb
-----> Installing Chef Omnibus (11.16.4)
downloading https://www.chef.io/chef/install.sh
  to file /tmp/install.sh
trying wget...
Downloading Chef 11.16.4 for el...
downloading https://www.chef.io/chef/metadata?v=11.16.4&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64
  to file /tmp/install.sh.2277/metadata.txt
trying wget...
url	https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.16.4-1.el6.x86_64.rpm
md5	2355a7a93bc4cc353bee6de9e3bcb7ba
sha256	278599ff185b680703e7a779db8674eeba843e9fe42a0ae06e01a9dfa9ac4d0e
downloaded metadata file looks valid...
downloading https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.16.4-1.el6.x86_64.rpm
  to file /tmp/install.sh.2277/chef-11.16.4-1.el6.x86_64.rpm
trying wget...
Comparing checksum with sha256sum...
Installing Chef 11.16.4
installing with rpm...
warning: /tmp/install.sh.2277/chef-11.16.4-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
Preparing...                                                            (100%)#                                           (100%)##                                          (100%)###                                         (100%)####                                        (100%)#####                                       (100%)######                                      (100%)#######                                     (100%)########                                    (100%)#########                                   (100%)##########                                  (100%)###########                                 (100%)############                                (100%)#############                               (100%)##############                              (100%)###############                             (100%)################                            (100%)#################                           (100%)##################                          (100%)###################                         (100%)####################                        (100%)#####################                       (100%)######################                      (100%)#######################                     (100%)########################                    (100%)#########################                   (100%)##########################                  (100%)###########################                 (100%)############################                (100%)#############################               (100%)##############################              (100%)###############################             (100%)################################            (100%)#################################           (100%)##################################          (100%)###################################         (100%)####################################        (100%)#####################################       (100%)######################################      (100%)#######################################     (100%)########################################    (100%)#########################################   (100%)##########################################  (100%)########################################### (100%)########################################### [100%]
   1:chef                                                               (  1%)#                                           (  3%)##                                          (  6%)###                                         (  8%)####                                        ( 10%)#####                                       ( 13%)######                                      ( 15%)#######                                     ( 17%)########                                    ( 19%)#########                                   ( 22%)##########                                  ( 24%)###########                                 ( 26%)############                                ( 28%)#############                               ( 31%)##############                              ( 33%)###############                             ( 35%)################                            ( 38%)#################                           ( 40%)##################                          ( 42%)###################                         ( 44%)####################                        ( 47%)#####################                       ( 49%)######################                      ( 51%)#######################                     ( 53%)########################                    ( 56%)#########################                   ( 58%)##########################                  ( 60%)###########################                 ( 63%)############################                ( 65%)#############################               ( 67%)##############################              ( 69%)###############################             ( 72%)################################            ( 74%)#################################           ( 76%)##################################          ( 78%)###################################         ( 81%)####################################        ( 83%)#####################################       ( 85%)######################################      ( 88%)#######################################     ( 90%)########################################    ( 92%)#########################################   ( 94%)##########################################  ( 97%)########################################### ( 99%)########################################### [100%]
Thank you for installing Chef!
Transferring files to <loadBalancer-centos-66>
[2015-03-13T14:44:35+00:00] WARN: 
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
SSL validation of HTTPS requests is disabled. HTTPS connections are still
encrypted, but chef is not able to detect forged replies or man in the middle
attacks.

To fix this issue add an entry like this to your configuration file:

```
  # Verify all HTTPS connections (recommended)
  ssl_verify_mode :verify_peer

  # OR, Verify only connections to chef-server
  verify_api_cert true
```

To check your SSL configuration, or troubleshoot errors, you can use the
`knife ssl check` command like so:

```
  knife ssl check -c /tmp/kitchen/solo.rb
```

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Starting Chef Client, version 11.16.4
Compiling Cookbooks...
[2015-03-13T14:44:36+00:00] WARN: Failed to read the private key /tmp/kitchen/client.pem: #<Errno::ENOENT: No such file or directory - /tmp/kitchen/client.pem>

================================================================================
Recipe Compile Error in /tmp/kitchen/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb
================================================================================

Chef::Exceptions::PrivateKeyMissing
-----------------------------------
I cannot read /tmp/kitchen/client.pem, which you told me to use to sign requests!

Cookbook Trace:
---------------
  /tmp/kitchen/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb:9:in `from_file'

Relevant File Content:
----------------------
/tmp/kitchen/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb:

  2:  # Cookbook Name:: rgCookbook
  3:  # Recipe:: rgLoadBalancer
  4:  #
  5:  # Copyright 2015, Ricardo Gonzalez
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9>> search(:node, "recipe:rgWebServer").each do |server|
 10:  	log "Name: #{result["hostname"]} - IP: #{result["ipaddress"]}"
 11:  end 12:  


Running handlers:
[2015-03-13T14:44:36+00:00] ERROR: Running exception handlers
Running handlers complete
[2015-03-13T14:44:36+00:00] ERROR: Exception handlers complete
[2015-03-13T14:44:36+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out
Chef Client failed. 0 resources updated in 1.488444346 seconds
[2015-03-13T14:44:36+00:00] ERROR: I cannot read /tmp/kitchen/client.pem, which you told me to use to sign requests!
[2015-03-13T14:44:36+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
Converge failed on instance <loadBalancer-centos-66>.
------Exception-------
Class: Kitchen::ActionFailed
Message: SSH exited (1) for command: [sh -c '
sudo -E /opt/chef/bin/chef-solo --config /tmp/kitchen/solo.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
']
---Nested Exception---
Class: Kitchen::SSHFailed
Message: SSH exited (1) for command: [sh -c '
sudo -E /opt/chef/bin/chef-solo --config /tmp/kitchen/solo.rb --log_level auto --force-formatter --no-color --json-attributes /tmp/kitchen/dna.json
']
------Backtrace-------
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:152:in `rescue in run_remote'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:148:in `run_remote'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:50:in `block in converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:70:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `new'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/kitchen-vagrant-0.15.0/lib/kitchen/driver/vagrant.rb:75:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `block in perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `synchronize_or_call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:381:in `block in action'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/benchmark.rb:281:in `measure'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:380:in `action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:312:in `converge_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:292:in `block in transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `each'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:130:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `block (2 levels) in run_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `block in create_with_logging_context'
----------------------
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Chef Omnibus installation detected (11.16.4)
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
Creating a new client identity for loadBalancer-centos-66 using the validator key.
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 0 resources

Running handlers:
Running handlers complete
Chef Client finished, 0/0 resources updated in 2.268257007 seconds
Finished converging <loadBalancer-centos-66> (0m7.62s).
-----> Destroying <loadBalancer-centos-66>...
==> default: Forcing shutdown of VM...
==> default: Destroying VM and associated drives...
Vagrant instance <loadBalancer-centos-66> destroyed.
Finished destroying <loadBalancer-centos-66> (0m3.58s).
-----> Creating <loadBalancer-centos-66>...
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'opscode-centos-6.6'...
[KProgress: 10%[KProgress: 30%[KProgress: 40%[KProgress: 50%[KProgress: 60%[KProgress: 70%[KProgress: 80%[KProgress: 90%[K==> default: Matching MAC address for NAT networking...
==> default: Setting the name of the VM: loadBalancer-centos-66_default_1426258693455_26543
==> default: Fixed port collision for 22 => 2222. Now on port 2202.
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==> default: Forwarding ports...
    default: 22 => 2202 (adapter 1)
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2202
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if its present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
==> default: Setting hostname...
==> default: Machine not provisioning because `--no-provision` is specified.
Vagrant instance <loadBalancer-centos-66> created.
Finished creating <loadBalancer-centos-66> (0m48.69s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Installing Chef Omnibus (11.16.4)
downloading https://www.chef.io/chef/install.sh
  to file /tmp/install.sh
trying wget...
Downloading Chef 11.16.4 for el...
downloading https://www.chef.io/chef/metadata?v=11.16.4&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64
  to file /tmp/install.sh.2282/metadata.txt
trying wget...
url	https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.16.4-1.el6.x86_64.rpm
md5	2355a7a93bc4cc353bee6de9e3bcb7ba
sha256	278599ff185b680703e7a779db8674eeba843e9fe42a0ae06e01a9dfa9ac4d0e
downloaded metadata file looks valid...
downloading https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.16.4-1.el6.x86_64.rpm
  to file /tmp/install.sh.2282/chef-11.16.4-1.el6.x86_64.rpm
trying wget...
Comparing checksum with sha256sum...
Installing Chef 11.16.4
installing with rpm...
warning: /tmp/install.sh.2282/chef-11.16.4-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
Preparing...                                                            (100%)#                                           (100%)##                                          (100%)###                                         (100%)####                                        (100%)#####                                       (100%)######                                      (100%)#######                                     (100%)########                                    (100%)#########                                   (100%)##########                                  (100%)###########                                 (100%)############                                (100%)#############                               (100%)##############                              (100%)###############                             (100%)################                            (100%)#################                           (100%)##################                          (100%)###################                         (100%)####################                        (100%)#####################                       (100%)######################                      (100%)#######################                     (100%)########################                    (100%)#########################                   (100%)##########################                  (100%)###########################                 (100%)############################                (100%)#############################               (100%)##############################              (100%)###############################             (100%)################################            (100%)#################################           (100%)##################################          (100%)###################################         (100%)####################################        (100%)#####################################       (100%)######################################      (100%)#######################################     (100%)########################################    (100%)#########################################   (100%)##########################################  (100%)########################################### (100%)########################################### [100%]
   1:chef                                                               (  1%)#                                           (  3%)##                                          (  6%)###                                         (  8%)####                                        ( 10%)#####                                       ( 13%)######                                      ( 15%)#######                                     ( 17%)########                                    ( 19%)#########                                   ( 22%)##########                                  ( 24%)###########                                 ( 26%)############                                ( 28%)#############                               ( 31%)##############                              ( 33%)###############                             ( 35%)################                            ( 38%)#################                           ( 40%)##################                          ( 42%)###################                         ( 44%)####################                        ( 47%)#####################                       ( 49%)######################                      ( 51%)#######################                     ( 53%)########################                    ( 56%)#########################                   ( 58%)##########################                  ( 60%)###########################                 ( 63%)############################                ( 65%)#############################               ( 67%)##############################              ( 69%)###############################             ( 72%)################################            ( 74%)#################################           ( 76%)##################################          ( 78%)###################################         ( 81%)####################################        ( 83%)#####################################       ( 85%)######################################      ( 88%)#######################################     ( 90%)########################################    ( 92%)#########################################   ( 94%)##########################################  ( 97%)########################################### ( 99%)########################################### [100%]
Thank you for installing Chef!
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
Creating a new client identity for loadBalancer-centos-66 using the validator key.
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 0 resources

Running handlers:
Running handlers complete
Chef Client finished, 0/0 resources updated in 2.272167387 seconds
Finished converging <loadBalancer-centos-66> (0m52.29s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Chef Omnibus installation detected (11.16.4)
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 0 resources

Running handlers:
Running handlers complete
Chef Client finished, 0/0 resources updated in 2.053158445 seconds
Finished converging <loadBalancer-centos-66> (0m7.83s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Chef Omnibus installation detected (11.16.4)
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 2 resources
Recipe: rgCookbook::rgLoadBalancer
  * log[load balancer!] action write
  
  * log[[node[loadBalancer-centos-66]]] action write
  

Running handlers:
Running handlers complete
Chef Client finished, 2/2 resources updated in 7.007239047 seconds
Finished converging <loadBalancer-centos-66> (0m12.52s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Chef Omnibus installation detected (11.16.4)
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...

================================================================================
Recipe Compile Error in /tmp/kitchen/cache/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb
================================================================================

NameError
---------
No resource, method, or local variable named `result' for `Chef::Recipe "rgLoadBalancer"'

Cookbook Trace:
---------------
  /tmp/kitchen/cache/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb:11:in `block in from_file'
  /tmp/kitchen/cache/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb:10:in `each'
  /tmp/kitchen/cache/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb:10:in `from_file'

Relevant File Content:
----------------------
/tmp/kitchen/cache/cookbooks/rgCookbook/recipes/rgLoadBalancer.rb:

  4:  #
  5:  # Copyright 2015, Ricardo Gonzalez
  6:  #
  7:  # All rights reserved - Do Not Redistribute
  8:  #
  9:  #search(:node, "recipe:rgWebServer").each do |server|
 10:  search(:node).each do |server|
 11>> 	Chef::Log.info("**** Name: #{result["hostname"]} - IP: #{result["ipaddress"]} *****")
 12:  end
 13:  
 14:  


Running handlers:
[2015-03-13T15:07:20+00:00] ERROR: Running exception handlers
Running handlers complete
[2015-03-13T15:07:20+00:00] ERROR: Exception handlers complete
[2015-03-13T15:07:20+00:00] FATAL: Stacktrace dumped to /tmp/kitchen/cache/chef-stacktrace.out
Chef Client failed. 0 resources updated in 6.979470823 seconds
[2015-03-13T15:07:20+00:00] ERROR: No resource, method, or local variable named `result' for `Chef::Recipe "rgLoadBalancer"'
[2015-03-13T15:07:20+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
Converge failed on instance <loadBalancer-centos-66>.
------Exception-------
Class: Kitchen::ActionFailed
Message: SSH exited (1) for command: [sh -c '
sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --chef-zero-port 8889 --json-attributes /tmp/kitchen/dna.json
']
---Nested Exception---
Class: Kitchen::SSHFailed
Message: SSH exited (1) for command: [sh -c '
sudo -E /opt/chef/bin/chef-client --local-mode --config /tmp/kitchen/client.rb --log_level auto --force-formatter --no-color --chef-zero-port 8889 --json-attributes /tmp/kitchen/dna.json
']
------Backtrace-------
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:152:in `rescue in run_remote'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:148:in `run_remote'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:50:in `block in converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/ssh.rb:70:in `initialize'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `new'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/driver/ssh_base.rb:45:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/kitchen-vagrant-0.15.0/lib/kitchen/driver/vagrant.rb:75:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `block in perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:416:in `synchronize_or_call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:381:in `block in action'
/home/rgonzalez/.rvm/rubies/ruby-2.0.0-p598/lib/ruby/2.0.0/benchmark.rb:281:in `measure'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:380:in `action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:352:in `perform_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:312:in `converge_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:292:in `block in transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `each'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:291:in `transition_to'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/instance.rb:130:in `converge'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `public_send'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/test-kitchen-1.3.1/lib/kitchen/command.rb:176:in `block (2 levels) in run_action'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `call'
/home/rgonzalez/.rvm/gems/ruby-2.0.0-p598/gems/logging-1.8.2/lib/logging/diagnostic_context.rb:323:in `block in create_with_logging_context'
----------------------
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Chef Omnibus installation detected (11.16.4)
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 0 resources

Running handlers:
Running handlers complete
Chef Client finished, 0/0 resources updated in 1.659041839 seconds
Finished converging <loadBalancer-centos-66> (0m7.09s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Chef Omnibus installation detected (11.16.4)
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 0 resources


Running handlers complete
Chef Client finished, 0/0 resources updated in 2.052958183 seconds
Finished converging <loadBalancer-centos-66> (0m7.52s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Chef Omnibus installation detected (11.16.4)
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 1 resources
Recipe: rgCookbook::rgLoadBalancer

  

Running handlers:
Running handlers complete
Chef Client finished, 1/1 resources updated in 1.973926589 seconds
Finished converging <loadBalancer-centos-66> (0m7.57s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Chef Omnibus installation detected (11.16.4)
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 1 resources
Recipe: rgCookbook::rgLoadBalancer

  

Running handlers:
Running handlers complete
Chef Client finished, 1/1 resources updated in 1.986801481 seconds
Finished converging <loadBalancer-centos-66> (0m7.49s).
-----> Destroying <loadBalancer-centos-66>...
==> default: Forcing shutdown of VM...
==> default: Destroying VM and associated drives...
Vagrant instance <loadBalancer-centos-66> destroyed.
Finished destroying <loadBalancer-centos-66> (0m3.69s).
-----> Creating <loadBalancer-centos-66>...
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Importing base box 'opscode-centos-6.6'...
[KProgress: 10%[KProgress: 30%[KProgress: 40%[KProgress: 50%[KProgress: 60%[KProgress: 70%[KProgress: 80%[KProgress: 90%[K==> default: Matching MAC address for NAT networking...
==> default: Setting the name of the VM: loadBalancer-centos-66_default_1426260266042_35332
==> default: Fixed port collision for 22 => 2222. Now on port 2205.
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==> default: Forwarding ports...
    default: 22 => 2205 (adapter 1)
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2205
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if its present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==> default: Machine booted and ready!
==> default: Checking for guest additions in VM...
==> default: Setting hostname...
==> default: Machine not provisioning because `--no-provision` is specified.
Vagrant instance <loadBalancer-centos-66> created.
Finished creating <loadBalancer-centos-66> (0m52.80s).
-----> Converging <loadBalancer-centos-66>...
Preparing files for transfer
Preparing dna.json
Resolving cookbook dependencies with Berkshelf 2.0.18...
Removing non-cookbook files before transfer
Preparing validation.pem
Preparing client.rb
-----> Installing Chef Omnibus (11.16.4)
downloading https://www.chef.io/chef/install.sh
  to file /tmp/install.sh
trying wget...
Downloading Chef 11.16.4 for el...
downloading https://www.chef.io/chef/metadata?v=11.16.4&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64
  to file /tmp/install.sh.2274/metadata.txt
trying wget...
url	https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.16.4-1.el6.x86_64.rpm
md5	2355a7a93bc4cc353bee6de9e3bcb7ba
sha256	278599ff185b680703e7a779db8674eeba843e9fe42a0ae06e01a9dfa9ac4d0e
downloaded metadata file looks valid...
downloading https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.16.4-1.el6.x86_64.rpm
  to file /tmp/install.sh.2274/chef-11.16.4-1.el6.x86_64.rpm
trying wget...
Comparing checksum with sha256sum...
Installing Chef 11.16.4
installing with rpm...
warning: /tmp/install.sh.2274/chef-11.16.4-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
Preparing...                                                            (100%)#                                           (100%)##                                          (100%)###                                         (100%)####                                        (100%)#####                                       (100%)######                                      (100%)#######                                     (100%)########                                    (100%)#########                                   (100%)##########                                  (100%)###########                                 (100%)############                                (100%)#############                               (100%)##############                              (100%)###############                             (100%)################                            (100%)#################                           (100%)##################                          (100%)###################                         (100%)####################                        (100%)#####################                       (100%)######################                      (100%)#######################                     (100%)########################                    (100%)#########################                   (100%)##########################                  (100%)###########################                 (100%)############################                (100%)#############################               (100%)##############################              (100%)###############################             (100%)################################            (100%)#################################           (100%)##################################          (100%)###################################         (100%)####################################        (100%)#####################################       (100%)######################################      (100%)#######################################     (100%)########################################    (100%)#########################################   (100%)##########################################  (100%)########################################### (100%)########################################### [100%]
   1:chef                                                               (  1%)#                                           (  3%)##                                          (  6%)###                                         (  8%)####                                        ( 10%)#####                                       ( 13%)######                                      ( 15%)#######                                     ( 17%)########                                    ( 19%)#########                                   ( 22%)##########                                  ( 24%)###########                                 ( 26%)############                                ( 28%)#############                               ( 31%)##############                              ( 33%)###############                             ( 35%)################                            ( 38%)#################                           ( 40%)##################                          ( 42%)###################                         ( 44%)####################                        ( 47%)#####################                       ( 49%)######################                      ( 51%)#######################                     ( 53%)########################                    ( 56%)#########################                   ( 58%)##########################                  ( 60%)###########################                 ( 63%)############################                ( 65%)#############################               ( 67%)##############################              ( 69%)###############################             ( 72%)################################            ( 74%)#################################           ( 76%)##################################          ( 78%)###################################         ( 81%)####################################        ( 83%)#####################################       ( 85%)######################################      ( 88%)#######################################     ( 90%)########################################    ( 92%)#########################################   ( 94%)##########################################  ( 97%)########################################### ( 99%)########################################### [100%]
Thank you for installing Chef!
Transferring files to <loadBalancer-centos-66>
Starting Chef Client, version 11.16.4
Creating a new client identity for loadBalancer-centos-66 using the validator key.
resolving cookbooks for run list: ["rgCookbook::rgLoadBalancer"]
Synchronizing Cookbooks:
  - rgCookbook
Compiling Cookbooks...
Converging 0 resources

Running handlers:
Running handlers complete
Chef Client finished, 0/0 resources updated in 2.374683401 seconds
Finished converging <loadBalancer-centos-66> (0m58.72s).
-----> Destroying <loadBalancer-centos-66>...
==> default: Forcing shutdown of VM...
==> default: Destroying VM and associated drives...
Vagrant instance <loadBalancer-centos-66> destroyed.
Finished destroying <loadBalancer-centos-66> (0m3.71s).
-----> Destroying <loadBalancer-centos-66>...
Finished destroying <loadBalancer-centos-66> (0m0.00s).
-----> Destroying <loadBalancer-centos-66>...
Finished destroying <loadBalancer-centos-66> (0m0.00s).
-----> Destroying <loadBalancer-centos-66>...
Finished destroying <loadBalancer-centos-66> (0m0.00s).
-----> Destroying <loadBalancer-centos-66>...
Finished destroying <loadBalancer-centos-66> (0m0.00s).
